# FileRenamerX 배포 가이드

## setup.exe 파일 생성 방법

### 1. 사전 준비

#### 필요한 도구 설치
```bash
pip install pyinstaller
```

#### 필요한 Python 패키지 확인
다음 패키지들이 설치되어 있어야 합니다:
- tkinter (Python 기본 포함)
- opencv-python (cv2)
- numpy
- google-cloud-vision
- google-auth
- openai
- google-generativeai
- psutil
- openpyxl
- Pillow (PIL)

### 2. 빌드 방법

#### 방법 1: 배치 파일 사용 (권장)
1. `build_exe.bat` 파일을 더블클릭하거나
2. 명령 프롬프트에서 실행:
   ```cmd
   build_exe.bat
   ```

#### 방법 2: PyInstaller 직접 실행
```cmd
pyinstaller FileRenamerX.spec
```

#### 방법 3: 명령어 직접 입력
```cmd
pyinstaller --name=FileRenamerX --onefile --windowed --add-data "prompt.txt;." run.py
```

### 3. 빌드 결과

빌드가 완료되면 다음 폴더가 생성됩니다:
- `dist/FileRenamerX.exe` - 실행 파일
- `build/` - 빌드 임시 파일 (삭제 가능)
- `FileRenamerX.spec` - 빌드 설정 파일

### 4. 배포 패키지 구성

배포할 때는 다음 파일들을 함께 포함해야 합니다:

```
FileRenamerX_배포폴더/
├── FileRenamerX.exe          # 실행 파일
├── prompt.txt                # 프롬프트 파일
├── vision-api-key/           # Google Vision API 키 폴더
│   └── vision-ocr-454121-572fb601794b.json
├── chatgpt-api-key/          # ChatGPT API 키 폴더
│   └── chatgpt_api_key.txt
└── README.md                 # 사용 설명서 (선택사항)
```

### 5. 설치 프로그램 만들기 (선택사항)

#### Inno Setup 사용 (무료)
1. [Inno Setup](https://jrsoftware.org/isinfo.php) 다운로드 및 설치
2. Inno Setup Compiler 실행
3. File > New로 새 스크립트 생성
4. 다음 설정 사용:

```ini
[Setup]
AppName=FileRenamerX
AppVersion=1.0.0
DefaultDirName={pf}\FileRenamerX
DefaultGroupName=FileRenamerX
OutputDir=installer
OutputBaseFilename=FileRenamerX_Setup
Compression=lzma
SolidCompression=yes

[Files]
Source: "dist\FileRenamerX.exe"; DestDir: "{app}"
Source: "prompt.txt"; DestDir: "{app}"
Source: "vision-api-key\*"; DestDir: "{app}\vision-api-key"; Flags: recursesubdirs
Source: "chatgpt-api-key\*"; DestDir: "{app}\chatgpt-api-key"; Flags: recursesubdirs

[Icons]
Name: "{group}\FileRenamerX"; Filename: "{app}\FileRenamerX.exe"
Name: "{commondesktop}\FileRenamerX"; Filename: "{app}\FileRenamerX.exe"
```

5. Build > Compile로 설치 파일 생성

### 6. 문제 해결

#### 빌드 오류 발생 시
1. 모든 의존성 패키지가 설치되었는지 확인
2. Python 버전 확인 (3.8 이상 권장)
3. 관리자 권한으로 실행

#### 실행 파일이 작동하지 않을 때
1. `--console` 옵션으로 콘솔 창 표시하여 오류 확인:
   ```cmd
   pyinstaller --name=FileRenamerX --onefile --console run.py
   ```
2. `error_log.txt` 파일 확인

#### 파일 크기가 너무 클 때
- `--exclude-module` 옵션으로 불필요한 모듈 제외
- UPX 압축 사용 (기본 활성화)

### 7. 테스트

배포 전 반드시 테스트:
1. 다른 컴퓨터에서 실행 파일 테스트
2. API 키 파일이 올바른 위치에 있는지 확인
3. 모든 기능이 정상 작동하는지 확인

### 8. 배포 체크리스트

- [ ] 실행 파일 빌드 완료
- [ ] API 키 폴더 포함 확인
- [ ] prompt.txt 파일 포함 확인
- [ ] 다른 컴퓨터에서 테스트 완료
- [ ] README.md 업데이트 (필요시)
- [ ] 설치 프로그램 생성 (선택사항)

